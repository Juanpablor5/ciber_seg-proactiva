# AWS S3

## ¿Qué es?

Amazon S3 (Simple Storage Service) es un servicio de almacenamiento en la nube que permite guardar y recuperar grandes volúmenes de datos de manera sencilla y segura. S3 proporciona almacenamiento de objetos, lo cual es ideal para almacenar logs, copias de seguridad y cualquier tipo de archivo que requiera ser accesible de forma confiable.

En este caso, S3 se utilizará para almacenar los logs de seguridad generados por las instancias EC2 y otros servicios, facilitando la gestión de los mismos y permitiendo su análisis posterior o almacenamiento a largo plazo.

![](../../assets/S3/S3.png)

### ¿Por qué es necesario?

El uso de Amazon S3 es necesario por las siguientes razones:

Almacenamiento escalable: S3 permite almacenar cualquier cantidad de datos sin preocuparse por la capacidad. Esto es crucial para manejar el creciente volumen de logs generados por los servicios de seguridad.

Alta disponibilidad y durabilidad: Amazon S3 asegura una alta disponibilidad y durabilidad de los datos, lo que garantiza que los logs estarán accesibles cuando se necesiten.

Integración con otros servicios: S3 se integra fácilmente con otros servicios de AWS, como Lambda y CloudWatch, lo cual facilita la automatización de procesos y la detección de amenazas en tiempo real.

Eficiencia de costos: S3 permite ahorrar en costos de almacenamiento, ya que ofrece diferentes clases de almacenamiento según la frecuencia de acceso a los datos, como S3 Standard, S3 Infrequent Access, y S3 Glacier.

## Estimación de costos

1. **Volumen de almacenamiento**:

   | Concepto        | Configuración          | Comentario                           |
   | --------------- | ---------------------- | ------------------------------------ |
   | Almacenamiento  | 200 GB                 | Logs de seguridad                    |
   | Costo por GB    | $0.023                 | Para S3 Standard                     |
   | Costo total     | 200 GB x $0.023        | $4.60                                |

2. **Transferencia de datos**:

   - **Asunción**: El tráfico de salida está dentro del nivel gratuito o es mínimo, por lo que no se considera en el cálculo.

**Con la información anterior los costos son:**

| Concepto                              | Costo Mensual |
| ------------------------------------- | ------------- |
| Costo de almacenamiento S3 (mensual)  | $4.60         |
| **Total**                             | **$4.60**     |


## Pasos detallados para despliegue para S3

1. **Crear bucket S3**:
   - Iniciar sesión en AWS Management Console y navegar a Amazon S3.
   ![](../../assets/S3/S3_2.png)
   ![](../../assets/S3/s3_3.png)
   - Seleccionar "Create bucket" y proporcionar un nombre único para el bucket.
    ![](../../assets/S3/s3_4.png)
   - Configurar permisos y opciones avanzadas.
   ![](../../assets/S3/s3_5.png)

2. **Configurar políticas de acceso**:

- Paso 1: Desde la consola de Amazon S3, selecciona el bucket recién creado.
![](../../assets/S3/s3_6.png)
- Paso 2: Ve a la pestaña “Permissions” y define las políticas de acceso.
![](../../assets/S3/s3_7.png)
- Paso 3: Puedes añadir una política de bucket (bucket policy) personalizada para limitar el acceso a ciertos usuarios o cuentas de AWS.
- Paso 4: También puedes utilizar las listas de control de acceso (ACL) para ajustar permisos específicos a nivel de objeto.
![](../../assets/S3/s3_8.png)

3. **Integrar S3 con EC2**:

   - Configurar las instancias EC2 para que envíen los logs de seguridad al bucket S3.
   - Esto se puede hacer mediante scripts que se ejecuten automáticamente o mediante el uso de AWS SDK para Python (boto3) para automatizar la carga de archivos.


4. **Configurar ciclo de vida del bucket**:
- Paso 1: Ve a la pestaña “Management” del bucket.
![](../../assets/S3/s3_9.png)
- Paso 2: Haz clic en “Create lifecycle rule” para definir una nueva regla de ciclo de vida.
- Paso 3: Ingresa un nombre para la regla y selecciona los criterios para el ciclo de vida, como mover los datos a una clase de almacenamiento más barata (por ejemplo, S3 Glacier) después de un cierto número de días.
![](../../assets/S3/s3_10.png)
- Paso 4: Configura las transiciones y la expiración de los datos según tus necesidades para reducir costos a largo plazo.
